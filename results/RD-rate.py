import numpy as np

reference = {
    "Y": 36.77587526699029,
    "U": 44.981848139158586,
    "V": 44.55634864886731,
    "Bits": 48901.54110032362,
}
ref_bitrate = 35156
test = [
    ({"Y": 36.58570683656958, "U": 44.89146098705501, "V": 44.258980161812296}, 22805),
    (
        {
            "Y": 36.58570683656958,
            "U": 44.89146098705501,
            "V": 44.258980161812296,
        },
        22805,
    ),
]

# [
#     [
#         (-0.1901684304207123, -35.131983160769146),
#         (-0.09038715210357395, -35.131983160769146),
#         (-0.2973684870550173, -35.131983160769146),
#     ],
#     [
#         (-0.1901684304207123, -35.131983160769146),
#         (-0.09038715210357395, -35.131983160769146),
#         (-0.2973684870550173, -35.131983160769146),
#     ],
# ]

# print(
#     [
#         [
#             (
#                 (psnrs[component] - reference[component]),
#                 ((bitrate - ref_bitrate) / ref_bitrate) * 100,
#             )
#             for component in ["Y", "U", "V"]
#         ]
#         for psnrs, bitrate in test
#     ]
# )


# [[5.288332325381321e-05, 2.513547055160566e-05, 8.269424000417611e-05],
# [5.288332325381321e-05, 2.513547055160566e-05, 8.269424000417611e-05]]

# reference = {
#     "Y": 36.7700974433657,
#     "U": 44.995934263754044,
#     "V": 44.567755817152104,
#     "Bits": 38526.95922330097,
# }
# ref_bitrate = 29797
# test = [
#     (
#         {
#             "Y": 36.58268105987055,
#             "U": 44.901018082524274,
#             "V": 44.27044655339805,
#             "Bits": 43946.912621359224,
#         },
#         30873,
#     ),
#     (
#         {
#             "Y": 36.58425867313916,
#             "U": 44.91059151294498,
#             "V": 44.28320241909385,
#             "Bits": 40480.9430420712,
#         },
#         29617,
#     ),
#     (
#         {
#             "Y": 36.57928753236246,
#             "U": 44.90973847087378,
#             "V": 44.283714474110035,
#             "Bits": 37635.374757281556,
#         },
#         28464,
#     ),
#     (
#         {
#             "Y": 36.5799929368932,
#             "U": 44.92769660194175,
#             "V": 44.307651027508086,
#             "Bits": 35451.01035598706,
#         },
#         27612,
#     ),
#     (
#         {
#             "Y": 36.5799929368932,
#             "U": 44.92769660194175,
#             "V": 44.307651027508086,
#             "Bits": 35451.01035598706,
#         },
#         27612,
#     ),
# ]

# [
# [0.00017417879506983962, 8.821206433993522e-05, 0.0002763097246784868],
# [0.0010324376123696608, 0.0004741263933836769, 0.0015808522114347627],
# [0.0001431432190571961, 6.466301041279897e-05, 0.00021308427835114],
# [8.700435078833002e-05, 3.1230051172676106e-05, 0.0001190410936585894],
# [8.700435078833002e-05, 3.1230051172676106e-05, 0.0001190410936585894]
# ]


# reference = {
#     "Y": 36.7700974433657,
#     "U": 44.995934263754044,
#     "V": 44.567755817152104,
#     "Bits": 38526.95922330097,
# }
# ref_bitrate = 29797
# test = [
#     (
#         {
#             "Y": np.mean(
#                 [
#                     36.58268105987055,
#                     36.58425867313916,
#                     36.57928753236246,
#                     36.5799929368932,
#                 ]
#             ),
#             "U": np.mean(
#                 [
#                     44.901018082524274,
#                     44.91059151294498,
#                     44.90973847087378,
#                     44.92769660194175,
#                 ]
#             ),
#             "V": np.mean(
#                 [
#                     44.27044655339805,
#                     44.28320241909385,
#                     44.283714474110035,
#                     44.307651027508086,
#                 ]
#             ),
#         },
#         np.mean([30873, 29617, 28464, 27612]),
#     ),
#     (
#         {
#             "Y": 36.5799929368932,
#             "U": 44.92769660194175,
#             "V": 44.307651027508086,
#             "Bits": 35451.01035598706,
#         },
#         27612,
#     ),
# ]

reference = {
    "Y": 36.7700974433657,
    "U": 44.995934263754044,
    "V": 44.567755817152104,
    "Bits": 38526.95922330097,
}
ref_bitrate = 29797
test = [
    (
        {
            "Y": 36.57692954692556,
            "U": 44.93313555825243,
            "V": 44.3259985841424,
        },
        27612,
    ),
    (
        {
            "Y": np.mean(
                [
                    36.58268105987055,
                    36.58425867313916,
                    36.57928753236246,
                    36.5799929368932,
                ]
            ),
            "U": np.mean(
                [
                    44.901018082524274,
                    44.91059151294498,
                    44.90973847087378,
                    44.92769660194175,
                ]
            ),
            "V": np.mean(
                [
                    44.27044655339805,
                    44.28320241909385,
                    44.283714474110035,
                    44.307651027508086,
                ]
            ),
        },
        np.mean([30873, 29617, 28464, 27612]),
    ),
]

print(test[0])

print(
    [
        [
            (
                (psnrs[component] - reference[component]),
                ((bitrate - ref_bitrate) / ref_bitrate) * 100,
            )
            for component in ["Y", "U", "V"]
        ]
        for psnrs, bitrate in test
    ]
)

# [
#     [
#         (-0.1931678964401371, -7.33295298184381),
#         (-0.06279870550161348, -7.33295298184381),
#         (-0.2417572330097073, -7.33295298184381),
#     ],
#     [
#         (-0.1885423927993557, -2.199885894553143),
#         (-0.08367309668285117, -2.199885894553143),
#         (-0.2815021986246009, -2.199885894553143),
#     ],
# ]
